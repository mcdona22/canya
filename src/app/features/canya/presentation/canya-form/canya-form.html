<div class="standard-wrapper centred-max-width form-general">
  <div class="screen-title"> {{ pageTitle() }}</div>
  <div
    class="form"
    [formGroup]="form"
  >
    <mat-form-field>
      <mat-label>Title</mat-label>
      <input
        (input)="onInput($event, title,maxTitle)"
        formControlName="name" matInput
        placeholder="Title of your canya">
      @if (!title.untouched && title.errors) {
        @if (title.errors!['required']) {
          <mat-error>You must have a title</mat-error>
        }
        @if (title.errors!['minlength'] || title.errors!['maxlength']) {
          <mat-error>The title must have between {{ minTitle }} and {{ maxTitle }} characters</mat-error>
        }
      }
    </mat-form-field>
    <mat-form-field>

      <mat-label>Description</mat-label>
      <textarea
        formControlName="description" matInput
        placeholder="Add a description"
        (input)="onInput($event, description,maxDesc)"

        rows="4"
      ></textarea>

    </mat-form-field>
    <div class="add-dates">
      <button mat-icon-button (click)="onAddDate()">
        <mat-icon>add</mat-icon>
      </button>
      <div class="prompt">Lets add some dates to choose from</div>
    </div>


  </div>

  <div class="event-dates">
    <div class="event-form">
      @for (dateForm of dateForms; track i; let i = $index) {
        <div class="event-date-form">
          <div class="event-date-form-row"
               [formGroup]="dateForm"
          >
            <div class="delete-control" (click)="onDeleteContactRow(i)">
              <mat-icon>delete</mat-icon>
            </div>
            <div class="event-date-control debug">

              <mat-form-field>
                <mat-label>Event Date</mat-label>
                <input matInput
                       [min]="minDate"
                       placeholder="Choose an event date"
                       formControlName="selectedDate"
                       [matDatepicker]="picker"
                >
                <mat-datepicker-toggle matSuffix [for]="picker">
                </mat-datepicker-toggle>
                <mat-datepicker #picker/>
              </mat-form-field>
            </div>
            <mat-form-field>
              <mat-label>Comments</mat-label>
              <input matInput placeholder="time slots etc" formControlName="comments">
            </mat-form-field>


          </div>

        </div>
      }


    </div>
  </div>

  <div class=" buttons">
    <button mat-stroked-button> Cancel</button>
    <button [disabled]="!form.valid" mat-flat-button>{{ saveCaption }}</button>
  </div>


  {{ formValue() | json }}
  <hr/>

  {{ title.errors | json }}

</div>




